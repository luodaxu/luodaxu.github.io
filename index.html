<!DOCTYPE html>
<html >
<head>

    <!--[if lt IE 9]>
        <style>body {display: none; background: none !important} </style>
        <meta http-equiv="Refresh" Content="0; url=//outdatedbrowser.com/" />
    <![endif]-->

<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="format-detection" content="telephone=no" />
<meta name="author" content="罗旭" />


    
    


<meta name="description" content="罗旭的博客">
<meta property="og:type" content="website">
<meta property="og:title" content="罗旭个人博客">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="罗旭个人博客">
<meta property="og:description" content="罗旭的博客">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="罗旭个人博客">
<meta name="twitter:description" content="罗旭的博客">

<link rel="apple-touch-icon" href= "/apple-touch-icon.png">


    <link rel="alternate" href="/atom.xml" title="罗旭个人博客" type="application/atom+xml">



    <link rel="shortcut icon" href="/favicon.png">



    <link href="//cdn.bootcss.com/animate.css/3.5.1/animate.min.css" rel="stylesheet">



    <link href="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.css" rel="stylesheet">



    <script src="//cdn.bootcss.com/pace/1.0.2/pace.min.js"></script>
    <link href="//cdn.bootcss.com/pace/1.0.2/themes/blue/pace-theme-minimal.css" rel="stylesheet">


<link rel="stylesheet" href="/css/style.css">


    <style> .article { opacity: 0;} </style>


<link href="//cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">


<title>罗旭个人博客</title>

<script src="//cdn.bootcss.com/jquery/2.2.4/jquery.min.js"></script>
<script src="//cdn.bootcss.com/clipboard.js/1.5.10/clipboard.min.js"></script>

<script>
    var yiliaConfig = {
        fancybox: true,
        animate: true,
        isHome: true,
        isPost: false,
        isArchive: false,
        isTag: false,
        isCategory: false,
        fancybox_js: "//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.js",
        scrollreveal: "//cdn.bootcss.com/scrollReveal.js/3.1.4/scrollreveal.min.js",
        search: undefined
    }
</script>


    <script> yiliaConfig.jquery_ui = [false]; </script>



    <script> yiliaConfig.rootUrl = "\/";</script>






</head>
<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
    <header id="header" class="inner">
        <a href="/" class="profilepic">
            <img src="/img/me.jpeg" class="animated zoomIn">
        </a>
        <hgroup>
          <h1 class="header-author"><a href="/">罗旭</a></h1>
        </hgroup>

        

        


        
            <div id="switch-btn" class="switch-btn">
                <div class="icon">
                    <div class="icon-ctn">
                        <div class="icon-wrap icon-house" data-idx="0">
                            <div class="birdhouse"></div>
                            <div class="birdhouse_holes"></div>
                        </div>
                        <div class="icon-wrap icon-ribbon hide" data-idx="1">
                            <div class="ribbon"></div>
                        </div>
                        
                        <div class="icon-wrap icon-link hide" data-idx="2">
                            <div class="loopback_l"></div>
                            <div class="loopback_r"></div>
                        </div>
                        
                        
                        <div class="icon-wrap icon-me hide" data-idx="3">
                            <div class="user"></div>
                            <div class="shoulder"></div>
                        </div>
                        
                    </div>
                    
                </div>
                <div class="tips-box hide">
                    <div class="tips-arrow"></div>
                    <ul class="tips-inner">
                        <li>菜单</li>
                        <li>标签</li>
                        
                        <li>友情链接</li>
                        
                        
                        <li>关于我</li>
                        
                    </ul>
                </div>
            </div>
        

        <div id="switch-area" class="switch-area">
            <div class="switch-wrap">
                <section class="switch-part switch-part1">
                    <nav class="header-menu">
                        <ul>
                        
                            <li><a href="/">主页</a></li>
                        
                            <li><a href="/archives/">所有文章</a></li>
                        
                            <li><a href="/tags/">标签云</a></li>
                        
                            <li><a href="/about/">关于我</a></li>
                        
                        </ul>
                    </nav>
                    <nav class="header-nav">
                        <ul class="social">
                            
                                <a class="fa Email" href="/luox199111@gmail.com" title="Email"></a>
                            
                                <a class="fa GitHub" href="https://www.github.com/luodaxu" title="GitHub"></a>
                            
                                <a class="fa RSS" href="/atom.xml" title="RSS"></a>
                            
                                <a class="fa 知乎" href="https://www.zhihu.com/people/xu-luo-47" title="知乎"></a>
                            
                        </ul>
                    </nav>
                </section>
                
                
                <section class="switch-part switch-part2">
                    <div class="widget tagcloud" id="js-tagcloud">
                        <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/">%</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Concurrency/">Concurrency</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Fiber-Reconcile/">Fiber Reconcile</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JS/">JS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JSX/">JSX</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Java/">Java</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/React/">React</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Scheduling/">Scheduling</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Stack-Reconcile/">Stack Reconcile</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Virtual-DOM/">Virtual DOM</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/VirtualDom/">VirtualDom</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Web/">Web</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/algorithm/">algorithm</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/animation/">animation</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/api/">api</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/async/">async</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/blog/">blog</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/cache/">cache</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/chrome/">chrome</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/css/">css</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/css3/">css3</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/debug/">debug</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/defer/">defer</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/etag/">etag</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/extend/">extend</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/github/">github</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hexo/">hexo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/html5/">html5</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/http/">http</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/if-none-match/">if-none-match</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/image/">image</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/include/">include</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/javascript/">javascript</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/lasyman/">lasyman</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/less/">less</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/lifecycle/">lifecycle</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mixin/">mixin</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/placeholder/">placeholder</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/property/">property</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/props/">props</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/px-em-rem/">px|em|rem</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/react/">react</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/sass/">sass</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/stateless/">stateless</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/transform/">transform</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/transition/">transition</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/web优化/">web优化</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/嵩峰/">嵩峰</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/广丰/">广丰</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/江西/">江西</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/组件化/">组件化</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/高阶组件/">高阶组件</a></li></ul>
                    </div>
                </section>
                
                
                
                <section class="switch-part switch-part3">
                    <div id="js-friends">
                    
                      <a class="main-nav-link switch-friends-link" href="https://hexo.io">Hexo</a>
                    
                      <a class="main-nav-link switch-friends-link" href="https://pages.github.com/">GitHub</a>
                    
                      <a class="main-nav-link switch-friends-link" href="http://moxfive.xyz/">MOxFIVE</a>
                    
                    </div>
                </section>
                

                
                
                <section class="switch-part switch-part4">
                
                    <div id="js-aboutme">后端 SSH2/Shiro, 前端 MKRN</div>
                </section>
                
            </div>
        </div>
    </header>                
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
      <div class="overlay">
          <div class="slider-trigger"></div>
          <h1 class="header-author js-mobile-header hide"><a href="/" title="回到主页">罗旭</a></h1>
      </div>
    <div class="intrude-less">
        <header id="header" class="inner">
            <a href="/" class="profilepic">
                <img src="/img/me.jpeg" class="animated zoomIn">
            </a>
            <hgroup>
              <h1 class="header-author"><a href="/" title="回到主页">罗旭</a></h1>
            </hgroup>
            
            <nav class="header-menu">
                <ul>
                
                    <li><a href="/">主页</a></li>
                
                    <li><a href="/archives/">所有文章</a></li>
                
                    <li><a href="/tags/">标签云</a></li>
                
                    <li><a href="/about/">关于我</a></li>
                
                <div class="clearfix"></div>
                </ul>
            </nav>
            <nav class="header-nav">
                        <ul class="social">
                            
                                <a class="fa Email" target="_blank" href="/luox199111@gmail.com" title="Email"></a>
                            
                                <a class="fa GitHub" target="_blank" href="https://www.github.com/luodaxu" title="GitHub"></a>
                            
                                <a class="fa RSS" target="_blank" href="/atom.xml" title="RSS"></a>
                            
                                <a class="fa 知乎" target="_blank" href="https://www.zhihu.com/people/xu-luo-47" title="知乎"></a>
                            
                        </ul>
            </nav>
        </header>                
    </div>
    <link class="menu-list" tags="标签" friends="友情链接" about="关于我"/>
</nav>
      <div class="body-wrap">
  
    <article id="post-webpack之hash和chunkhash" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/11/16/webpack之hash和chunkhash/" class="article-date">
      <time datetime="2017-11-16T06:47:32.000Z" itemprop="datePublished">2017-11-16</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/11/16/webpack之hash和chunkhash/">webpack之hash和chunkhash</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        
      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-Web优化之Web缓存知识" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/11/16/Web优化之Web缓存知识/" class="article-date">
      <time datetime="2017-11-16T03:49:24.000Z" itemprop="datePublished">2017-11-16</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/11/16/Web优化之Web缓存知识/">Web优化之Web缓存知识</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>Web缓存指的是可以自动保存常见http请求副本的http设备，对于前端开发者来说，我们通常打交道的是浏览器。除此之外，各种各样的代理服务器也可以做缓存，相当于一个中间者的作用。当web请求到达缓存时，缓存从本地副本中提取这个副本内容而不需要经过服务器，带来以下优点：</p>
<ol>
<li>缓存减少了冗余的数据传输，节省流量。</li>
<li>缓存缓解了带宽瓶颈问题。不需要更多的带宽就能更快加载页面</li>
<li>缓存缓解了瞬间拥塞，降低了对原始服务器的要求。</li>
<li>缓存降低了距离延时， 因为从较远的地方加载页面会更慢一些。</li>
</ol>
<p>＃ 缓存的分类<br>缓存可以是单个用户专用的，也可以是多个用户共享的，专用缓存被称为私有缓存，</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/cache/">cache</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/etag/">etag</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/http/">http</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/if-none-match/">if-none-match</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-React-Fiber-初探" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/11/14/React-Fiber-初探/" class="article-date">
      <time datetime="2017-11-14T06:55:14.000Z" itemprop="datePublished">2017-11-14</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/11/14/React-Fiber-初探/">React Fiber 初探</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p><div style="color:red;font-size: 28px;">本文将持续更新…..</div></p>
<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>React Fiber 是对 React 核心算法的重写，引入了多线程调和特性。React 的产生众所周知，是为了解决 DOM结构复杂或者频繁操作而产生性能瓶颈而出现的技术，重要的一点是引入了Virtual DOM 新概念，实际上 Virtual DOM 是一个 JavaScript 对象。每次，我们只需要告诉 React 下一个状态是什么，React会自己构建一个新的 Virtual DOM，然后根据新旧 Virtual DOM 快速计算其差异，找出需要重绘或重排的元素，告诉浏览器。浏览器根据相关的更新，重新计算 DOM Tree，重绘页面。<br>那么现在的 diff 操作会出现什么问题呢？这样的调度（reconcile）有什么缺点？</p>
<h1 id="新问题"><a href="#新问题" class="headerlink" title="新问题"></a>新问题</h1><p>可以确定的是复杂度为常数的 diff 算法还是很优秀的，但是react 的调度策略 － stack reconcile，这个策略像函数调用栈一样，会深度优先遍历所有的 Virtual DOM 节点，进行Diff。它一定要等整棵 Virtual DOM 计算完成之后，才将任务出栈释放主线程。所以，在浏览器主线程被 React更新状态任务占据的时候，用户与浏览器进行任何的交互都不能得到反馈，只有等到任务结束，才能突然得到浏览器的响应。</p>
<ol>
<li>在 UI 中，不是所有的状态转移都需要立即执行。大量的同时计算可能会导致资源的浪费，以致出现掉帧的状况，降低用户体验。</li>
<li>不同类型的状态转移应有不同的优先级，比如点击按钮出现动画的优先级应该比 Fetch API 要高。</li>
<li>React 是 pull-based 实现的，事务的时序全部由 React 决定。我们没办法操控执行事务的时序。</li>
</ol>
<h1 id="新技术"><a href="#新技术" class="headerlink" title="新技术"></a>新技术</h1><p>现在我们考虑能不能将 react更新状态的任务分为多个事务单元，为每个事务单元设置优先级，并且这些单元有可取消，可重启，可复用等作用。</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Concurrency/">Concurrency</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Fiber-Reconcile/">Fiber Reconcile</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/React/">React</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Scheduling/">Scheduling</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Stack-Reconcile/">Stack Reconcile</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-css3-transform-transition-animation-续2" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/01/25/css3-transform-transition-animation-续2/" class="article-date">
      <time datetime="2017-01-25T07:37:37.000Z" itemprop="datePublished">2017-01-25</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/01/25/css3-transform-transition-animation-续2/">css3-transform-transition-animation-续2</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h2 id="animation"><a href="#animation" class="headerlink" title="animation"></a>animation</h2><p>Animation之前我们有必要先来了解一个特殊的东西，那就是”Keyframes”,我们把他叫做“关键帧”,Keyframes具有其自己的语法规则，他的命名是由”@keyframes”开头，后面紧接着是这个“动画的名称”加上一对花括号“{}”，括号中就是一些不同时间段样式规则，有点像我们css的样式写法一样。对于一个”@keyframes”中的样式规则是由多个百分比构成的，如“0%”到”100%”之间，我们可以在这个规则中创建多个百分比，我们分别给每一个百分比中给需要有动画效果的元素加上不同的属性，从而让元素达到一种在不断变化的效果，比如说移动，改变元素颜色，位置，大小，形状等，不过有一点需要注意的是，我们可以使用“fromt”“to”来代表一个动画是从哪开始，到哪结束，也就是说这个 “from”就相当于”0%”而”to”相当于”100%”,值得一说的是，其中”0%”不能像别的属性取值一样把百分比符号省略，我们在这里必须加上百分符号（“%”）如果没有加上的话，我们这个keyframes是无效的，不起任何作用。因为keyframes的单位只接受百分比值。</p>
<h4 id="animation属性"><a href="#animation属性" class="headerlink" title="animation属性"></a>animation属性</h4><ol>
<li>animation-name<blockquote>
<p>animation-name: none | IDENT[,none | IDENT]</p>
</blockquote>
</li>
</ol>
<p>animation-name:是用来定义一个动画的名称，其主要有两个值：IDENT是由Keyframes创建的动画名，换句话说此处的IDENT要和Keyframes中的IDENT一致，如果不一致,将不能实现任何动画效果；none为默认值，当值为none时，将没有任何动画效果。另外我们这个属性跟前面所讲的transition一样，我们可以同时附几个animation给一个元素，我们只需要用逗号“，”隔开。</p>
<ol>
<li>animation-duration<blockquote>
<p> animation-duration: <time>[,<time>]*</time></time></p>
</blockquote>
</li>
</ol>
<p>animation-duration是用来指定元素播放动画所持续的时间长，取值:<time>为数值，单位为s （秒.）其默认值为“0”。这个属性跟transition中的transition-duration使用方法是一样的。</time></p>
<ol>
<li>animation-timing-function<blockquote>
<p>  animation-timing-function:ease | linear | ease-in | ease-out | ease-in-out | cubic-bezier(<number>, <number>, <number>, <number>) [, ease | linear | ease-in | ease-out | ease-in-out | cubic-bezier(<number>, <number>, <number>, <number>)]*</number></number></number></number></number></number></number></number></p>
</blockquote>
</li>
</ol>
<p>animation-timing-function:是指元素根据时间的推进来改变属性值的变换速率，说得简单点就是动画的播放方式。他和transition中的transition-timing-function一样，具有以下六种变换方式：ease;ease-in;ease-in-out;linear;cubic-bezier。具体的使用方法大家可以点这里，查看其中transition-timing-function的使用方法。</p>
<ol>
<li>animation-delay<blockquote>
<p> animation-delay: <time>[,<time>]*</time></time></p>
</blockquote>
</li>
</ol>
<p>animation-delay:是用来指定元素动画开始时间。取值为<time>为数值，单位为s(秒)，其默认值也是0。这个属性和transition-delayy使用方法是一样的。</time></p>
<ol>
<li>animation-direction<blockquote>
<p> animation-direction: normal | alternate [, normal | alternate]</p>
</blockquote>
</li>
</ol>
<p>animation-direction是用来指定元素动画播放的方向，其只有两个值，默认值为normal，如果设置为normal时，动画的每次循环都是向前播放；另一个值是alternate，他的作用是，动画播放在第偶数次向前播放，第奇数次向反方向播放。</p>
<ol>
<li>animation-direction<blockquote>
<p> animation-direction: normal | alternate [, normal | alternate]</p>
</blockquote>
</li>
</ol>
<p>animation-direction是用来指定元素动画播放的方向，其只有两个值，默认值为normal，如果设置为normal时，动画的每次循环都是向前播放；另一个值是alternate，他的作用是，动画播放在第偶数次向前播放，第奇数次向反方向播放。</p>
<ol>
<li>animation-play-state<blockquote>
<p>  animation-play-state:running | paused [, running | paused]</p>
</blockquote>
</li>
</ol>
<p>animation-play-state主要是用来控制元素动画的播放状态。其主要有两个值，running和paused其中running为默认值。他们的作用就类似于我们的音乐播放器一样，可以通过paused将正在播放的动画停下了，也可以通过running将暂停的动画重新播放，我们这里的重新播放不一定是从元素动画的开始播放，而是从你暂停的那个位置开始播放。另外如果暂时了动画的播放，元素的样式将回到最原始设置状态。</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-css3-transform-transition-animation-续1" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/01/25/css3-transform-transition-animation-续1/" class="article-date">
      <time datetime="2017-01-25T06:34:39.000Z" itemprop="datePublished">2017-01-25</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/01/25/css3-transform-transition-animation-续1/">css3-transform-transition-animation(续1)</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h2 id="transition"><a href="#transition" class="headerlink" title="transition"></a>transition</h2><p>定义：css的transition允许css的属性值在一定的时间区间内平滑地过度，这种效果可以在鼠标单击、获得焦点、被点击或对元素任何改变中触发，并圆滑地以动画效果改变CSS的属性值。<br>属性值:</p>
<blockquote>
<p> transition ： [&lt;’transition-property’&gt; || &lt;’transition-duration’&gt; || &lt;’transition-timing-function’&gt; ||<br>    &lt;’transition-delay’&gt; [, [&lt;’transition-property’&gt; || &lt;’transition-duration’&gt; ||<br>    &lt;’transition-timing-function’&gt; || &lt;’transition-delay’&gt;]]*</p>
</blockquote>
<h4 id="transition-property"><a href="#transition-property" class="headerlink" title="transition-property"></a>transition-property</h4><p>transition-property是用来指定当元素其中一个属性改变时执行transition效果，取值为:<br>all: 所有属性，默认值<br>indent: 元素属性名<br>none：transition马上停止执行</p>
<h4 id="transition-duration"><a href="#transition-duration" class="headerlink" title="transition-duration"></a>transition-duration</h4><p>transition-duration是用来指定元素 转换过程的持续时间，取值：<time>为数值，单位为s（秒）或者ms(毫秒),可以作用于所有元素，包括:before和:after伪元素。其默认值是0，也就是变换时是即时的。</time></p>
<h4 id="transition-timing-function"><a href="#transition-timing-function" class="headerlink" title="transition-timing-function"></a>transition-timing-function</h4><blockquote>
<p> transition-timing-function ： ease | linear | ease-in | ease-out | ease-in-out | cubic-bezier(<number>, <number>, <number>, <number>) [, ease | linear | ease-in | ease-out | ease-in-out | cubic-bezier(<number>, <number>, <number>, <number>)]*</number></number></number></number></number></number></number></number></p>
</blockquote>
<p>transition-timing-function的值允许你根据时间的推进去改变属性值的变换速率，transition-timing-function有6个可能值：<br>1、ease：（逐渐变慢）默认值，ease函数等同于贝塞尔曲线(0.25, 0.1, 0.25, 1.0).<br>2、linear：（匀速），linear 函数等同于贝塞尔曲线(0.0, 0.0, 1.0, 1.0).<br>3、ease-in：(加速)，ease-in 函数等同于贝塞尔曲线(0.42, 0, 1.0, 1.0).<br>4、ease-out：（减速），ease-out 函数等同于贝塞尔曲线(0, 0, 0.58, 1.0).<br>5、ease-in-out：（加速然后减速），ease-in-out 函数等同于贝塞尔曲线(0.42, 0, 0.58, 1.0)<br>6、cubic-bezier：（该值允许你去自定义一个时间曲线）， 特定的cubic-bezier曲线。 (x1, y1, x2, y2)四个值特定于曲线上点P1和点P2。所有值需在[0, 1]区域内，否则无效。<br>其是cubic-bezier为通过贝赛尔曲线来计算“转换”过程中的属性值，如下曲线所示，通过改变P1(x1, y1)和P2(x2, y2)的坐标可以改变整个过程的Output Percentage。初始默认值为default.</p>
<h4 id="transition-delay"><a href="#transition-delay" class="headerlink" title="transition-delay"></a>transition-delay</h4><p>transition-delay是用来指定一个动画开始执行的时间，也就是说当改变元素属性值后多长时间开始执行transition效果，其取值：<time>为数值，单位为s（秒）或者ms(毫秒)，其使用和transition-duration极其相似，也可以作用于所有元素，包括:before和:after伪元素。 默认大小是”0”，也就是变换立即执行，没有延迟。</time></p>
<p>有时我们不只改变一个css效果的属性,而是想改变两个或者多个css属性的transition效果，那么我们只要把几个transition的声明串在一起，用逗号（“，”）隔开，然后各自可以有各自不同的延续时间和其时间的速率变换方式。但需要值得注意的一点：transition-delay与transition-duration的值都是时间，所以要区分它们在连写中的位置，一般浏览器会根据先后顺序决定，第一个可以解析为时间的怭值为transition-duration第二个为transition-delay。如：</p>
<blockquote>
<p>a {<br>    -moz-transition: background 0.5s ease-in,color 0.3s ease-out;<br>    -webkit-transition: background 0.5s ease-in,color 0.3s ease-out;<br>    -o-transition: background 0.5s ease-in,color 0.3s ease-out;<br>    transition: background 0.5s ease-in,color 0.3s ease-out;<br>  }</p>
</blockquote>

      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/animation/">animation</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/css3/">css3</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/transform/">transform</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/transition/">transition</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-css3-transform-transition-amination" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/01/24/css3-transform-transition-amination/" class="article-date">
      <time datetime="2017-01-24T06:26:05.000Z" itemprop="datePublished">2017-01-24</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/01/24/css3-transform-transition-amination/">css3-transform,transition,animation</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p>CSS3提供了3动画的属性，分别是 transform, transition和animation，下面分别讲解这3个属性。</p>
<h2 id="transform"><a href="#transform" class="headerlink" title="transform"></a>transform</h2><p>transform的3D在这里暂时不做讲解，读者如果自己有兴趣可以参考官网的讲解。</p>
<h4 id="transform方法"><a href="#transform方法" class="headerlink" title="transform方法"></a>transform方法</h4><table>
<thead>
<tr>
<th style="text-align:left">方法</th>
<th style="text-align:left">作用</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">translate()</td>
<td style="text-align:left">变动，位移</td>
</tr>
<tr>
<td style="text-align:left">rotate()</td>
<td style="text-align:left">旋转</td>
</tr>
<tr>
<td style="text-align:left">scale()</td>
<td style="text-align:left">比例</td>
</tr>
<tr>
<td style="text-align:left">skew()</td>
<td style="text-align:left">斜拉</td>
</tr>
<tr>
<td style="text-align:left">matrix()</td>
<td style="text-align:left">综合</td>
</tr>
</tbody>
</table>
<p>详细转换方法<br><img src="/img/transform/transform.png" alt=""><br>上述的translate, rotate, scale, skew方法不做详细讲解，使用也比较简单，支持百分比。下面主要讲解下matrix。</p>
<h4 id="matrix函数"><a href="#matrix函数" class="headerlink" title="matrix函数"></a>matrix函数</h4><p>matrix函数可以实现上面的translate, rotate, scale, skew的函数，也就是说matrix函数提供了上述的全部功能。<br><img src="/img/transform/matrix-skew-scale-rotate-translate.gif" alt=""><br>理解transform中matrix()矩阵方法有利于透彻理解CSS3的transform属性，下面将将详细讲解。</p>
<h5 id="transform-与坐标系统"><a href="#transform-与坐标系统" class="headerlink" title="transform 与坐标系统"></a>transform 与坐标系统</h5><p>使用过transform属性旋转的知道，默认是绕着中心点旋转的，这个中心点可以通过 transform-origin 属性控制，后面将会讲解。坐标系统如下图所示。<br><img src="/img/transform/matrix-1.png" alt=""></p>
<h4 id="transform-参数"><a href="#transform-参数" class="headerlink" title="transform 参数"></a>transform 参数</h4><p>matrix支持六个参数，我们分别标记为a, b, c, d, e, f</p>
<blockquote>
<p>transform: matrix(a, b, c, d, e, f);</p>
</blockquote>
<p><img src="/img/transform/matrix-2.gif" alt=""><br>注意书写是竖着的，经过这个矩阵变换成<br><img src="/img/transform/matrix-3.gif" alt=""><br>其中 x, y 代表转化元素的坐标变量，那么<strong>ax+cy+e</strong>的意义又是什么？ 其实<strong>ax+cy+e</strong>为变换后的水平坐标<strong>bx+dy+f</strong>为变换后的垂直位置。举个例子</p>
<blockquote>
<p>transform(1, 0, 0, 1, 30, 30); // a=1, b=0, c=0, d=1, e=30, f=30</p>
</blockquote>
<p>现在假设中心点坐标为(0, 0)，即x=0, y=0，那么x坐标变化后就是ax+by+e = 1<em>0+0</em>0+30 = 30, y坐标就是bx+dy+f = 30；于是坐标从(0, 0) -&gt; (30, 30)，实际上transform: matrix(1, 0, 0, 1, 30, 30);就等同于transform: translate(30px, 30px);. 注意：translate, rotate等方法都是需要单位的，而matrix方法e, f参数的单位可以省略。<br>于是第一步总结为:</p>
<blockquote>
<p>transform: matrix(a, b, c, d, 水平偏移距离, 垂直偏移距离)</p>
</blockquote>
<h4 id="matrix矩阵与缩放，旋转以及拉伸"><a href="#matrix矩阵与缩放，旋转以及拉伸" class="headerlink" title="matrix矩阵与缩放，旋转以及拉伸"></a>matrix矩阵与缩放，旋转以及拉伸</h4><p>偏移很好理解，下面进一步讲解matrix矩阵的缩放，旋转和拉伸效果。</p>
<ul>
<li>缩放 scale<br>我们知道公式，克推导：<blockquote>
<p>x’ = ax + by + e = ax + 0<em>y+0 = ax // x放大倍数<br>y’ = cx + dy + f= 0</em>x +d*y + f = dy // y放大倍数</p>
</blockquote>
</li>
</ul>
<p>总结公式为: <strong>transform: matrix(a, 0, 0, d, 0, 0)</strong><br>也就是matrix(sx, 0, 0, sy, 0, 0);，等同于scale(sx, sy);</p>
<ul>
<li>旋转 rotate<br>旋转相对麻烦，涉及到了角度问题，假设旋转的角度θ，我们取特殊值去求解。<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">x&apos; = ax + by 表达式1</div><div class="line">y&apos; = cx + dy 表达式2</div><div class="line"></div><div class="line">取原坐标(x, 0)，则上面表达式1为x&apos;=ax, y&apos;=cx，下面旋转θ后，x&apos;=cosθx, y&apos;=-sinθx，则</div><div class="line">x&apos; = ax = cosθx</div><div class="line">y&apos; = cx = -sinθx</div><div class="line">推导出a = cosθ, c = -sinθ</div><div class="line">同理推出b = sinθ, d = cosθ</div></pre></td></tr></table></figure>
</li>
</ul>
<p>总结：旋转公式为<strong>transform: matrix(cosθ, sinθ, -sinθ, cosθ, 0, 0)</strong><br>但是还是推荐使用rotate函数，简介明了，毕竟要去计算。</p>
<ul>
<li>斜拉 skew<br>总结：旋转公式为<strong>transform: matrix(1, tan(θy),tan(θx), 1, 0, 0)</strong></li>
</ul>
<h4 id="如何根据实际需求使用matrix"><a href="#如何根据实际需求使用matrix" class="headerlink" title="如何根据实际需求使用matrix"></a>如何根据实际需求使用matrix</h4><p>当想使用matrix的时候无非上述四个需求不能同时满足，而使用matrix最大的难点就是计算matrix函数的参数值，下面我们通过举个例子介绍下如何计算。<br>需求：图像以 y=x 轴进行旋转<br><img src="/img/transform/matrix-4.png" alt=""><br>那如何计算参数值呢？<br>其实很简单，无非就是先在图形上假设一个坐标点(x, y)，经过变化后的坐标值为 (x’, y’)，计算出这两个的关系式不就能算出来了嘛<br>A: 小学数学，(x’, y’)和(x, y)的连线与y=kx垂直，则，</p>
<blockquote>
<p>(y’-y)/(x’-x) = -1/k  -&gt; ky’-ky = x’-x</p>
</blockquote>
<p>B: 小学数学，(x’, y’)和(x, y)的中点在y=kx上面，则，</p>
<blockquote>
<p>(y’+y)/2 = k * (x’+x)/2 -&gt; kx+kx’ = y+y’</p>
</blockquote>
<p>下面解方程，<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">x&apos; = (1-k*k)/(k*k+1) *x + 2k/(k*k+1) *y;</div><div class="line">y&apos; = 2k/(k*k+1) *x + (k*k-1)/(k*k+1) *y;</div><div class="line">结合矩阵：</div><div class="line">x&apos; = ax+cy+e;</div><div class="line">y&apos; = bx+dy+f;</div></pre></td></tr></table></figure></p>
<p>最终得到：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">a = (1-k*k)/(k*k+1);</div><div class="line">b = 2k/(k*k+1);</div><div class="line">c = 2k/(k*k+1);</div><div class="line">d = (k*k-1)/(k*k+1);</div></pre></td></tr></table></figure></p>
<p>所以说 transform matrix也不过如此.</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/animation/">animation</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/css3/">css3</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/transform/">transform</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/transition/">transition</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-react-高阶组件" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/01/23/react-高阶组件/" class="article-date">
      <time datetime="2017-01-23T06:04:59.000Z" itemprop="datePublished">2017-01-23</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/01/23/react-高阶组件/">react-高阶组件</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p>目前的前端社区，推荐组件化，组件化又推荐组合而非继承，组合是业务和视图的组合，这样最小粒化组件，又不失去灵活性和可控性。mixin也是一种比较好的实践，但是自身自身的一些问题而慢慢不被推崇。高阶组件(Higher Order Comopnent, HOC)作为mixin之外的一种组件抽象与处理形式，自身有许多好处。高阶组件是一个非常棒的形式，它已经在多个 React 库中被证明了它的价值，本文将深入学习分析。<br>读者最好有React/ES6等基础知识。</p>
<h4 id="什么是高阶组件"><a href="#什么是高阶组件" class="headerlink" title="什么是高阶组件"></a>什么是高阶组件</h4><blockquote>
<p>一个高阶组件只是一个包装了另外一个React组件的React组件</p>
</blockquote>
<p>熟悉函数式编程的读者知道这可以被描述成一个函数，本质上是一个类工程(class factory)，这是我们再熟悉不过的一种设计模式。下方的函数标签伪代码启发来自Haskell，一种推荐函数式的编程语言。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">hocFactory:: W: React.Comopnent =&gt; E: React.Comopnent</div></pre></td></tr></table></figure></p>
<p>这里的W是 WrappedComponent缩写，指被包装的React.Comopnent，E是EnhancedCompnent的缩写，指的是包装最后返回的新的高阶React组件。<br>在这里中的<strong>包装</strong>指的是两件事，也就是两个功能。</p>
<ol>
<li>属性代理（Props Proxy）: 高阶组件操控传递给WrappedComponent的props</li>
<li>反向继承（Inheritance Inversion）: 高阶组件继承（extends）WrappedComponent</li>
</ol>
<p>其实功能1就是 WrappedComponent将由通过EnhancedCompnent获取传递过来的props，例如是某些业务逻辑之类的。功能2就是最终返回的EnhancedCompnent通过这种方式继承(extends)了WrappedComponent的属性。</p>
<h4 id="使用高阶组件做什么"><a href="#使用高阶组件做什么" class="headerlink" title="使用高阶组件做什么"></a>使用高阶组件做什么</h4><p>通过实践后高度概括，高阶组件可以实现下面功能：</p>
<ul>
<li>代码复用，逻辑抽象，抽离底层准备代码(bootstrap)代码</li>
<li>渲染劫持</li>
<li>State抽象和更改</li>
<li>Props更改</li>
</ul>
<p>这些功能是高度概括的，下面通过学习一个高阶组件，学习 <strong>允许/限制</strong> 通过高阶组件我们可以实现哪些功能，如何做到代码的clean。</p>
<h4 id="高阶组件工厂的实现"><a href="#高阶组件工厂的实现" class="headerlink" title="高阶组件工厂的实现"></a>高阶组件工厂的实现</h4><p>在这节中我们将学习两种主流的在 React 中实现高阶组件的方法：属性代理（Props Proxy）和 反向继承（Inheritance Inversion）。两种方法囊括了几种包装 WrappedComponent 的方法。</p>
<h5 id="Props-Proxy-PP-属性代理"><a href="#Props-Proxy-PP-属性代理" class="headerlink" title="Props Proxy (PP) 属性代理"></a>Props Proxy (PP) 属性代理</h5><p>Props Proxy (PP) 属性代理可以理解为EnhancedCompnent替WrappedComponent接收传递过来的组件，最后的实际作用还是在WrappedComponent上，就相当于实现了一个代理一样。举个例子：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">function ppHOC(WrappedComponent) &#123;</div><div class="line">    return class PP extends React.Component &#123;</div><div class="line">        render() &#123;</div><div class="line">            return &lt;WrappedComponent &#123;...this.props&#125; /&gt;;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>可以看到这里高阶组件的render方法返回了一个type为WrappedComponent的React Element，高阶组件接收到的props传递给它，因此得名 Props Proxy.</p>
<h5 id="Props-Proxy功能"><a href="#Props-Proxy功能" class="headerlink" title="Props Proxy功能"></a>Props Proxy功能</h5><ol>
<li>更改props</li>
<li>通过refs获取组件实例</li>
<li>抽象state</li>
<li>把 WrappedComponent 与其它 elements 包装在一起</li>
</ol>
<p>（1）更改props<br>这个wrap的过程中我们可以对props进行<strong>读取/增加/修改/删除</strong>等操作将要递给WrappedComponent的props。<br>在修改或删除重要 props 的时候要小心，你可能应该给高阶组件的 props 指定命名空间（namespace），以防破坏从外传递给 WrappedComponent 的 props。<br>例如，添加新的props，这个应用目前登陆的一个用户可以在 WrappedComponent 通过 this.props.user 获取。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">function ppHOC(WrappedComponent) &#123;</div><div class="line">    return class PP extends React.Comopnent &#123;</div><div class="line">        render() &#123;</div><div class="line">            const newProps = &#123;  // 提供新的对象防止修改外部传递的props</div><div class="line">                user: currentLoggedInUser</div><div class="line">            &#125;;</div><div class="line">            return &lt;WrappedComponent &#123;..this.props&#125; &#123;...newProps&#125; /&gt;;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>（2）通过refs获取组件实例(Props Proxy with ref demonstration)<br>通过ref获取关键字 <strong>this</strong> (WrappedComponent的实例)，但是必须经历一次正常的渲染过程让ref得到计算，意味着可以在高阶组件的render方法中返回WrappedComponent,让React进行reconciliation过程这之后可以通过ref获取到这个WrappedComponent的实例。<br>例如下面例子就是通过ref获取WrappedComponent实例并调用实例方法。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">function refsHOC(WrappedComponent) &#123;</div><div class="line">    return class refsHOC extends React.Component &#123;</div><div class="line"></div><div class="line">        render() &#123;</div><div class="line">            const props = Object.assign(&#123;&#125;, this.props. &#123;ref: this.proc.bind(this)&#125;);</div><div class="line">            return &lt;WrappedComponent &#123;...props&#125;/&gt;;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>当 WrappedComponent 被渲染后，ref 上的回调函数 proc 将会执行，此时就有了这个 WrappedComponent 的实例的引用。这个可以用来『读取，添加』实例的 props 或用来执行实例方法。<br>（3）抽象state<br>可以通过向WrappedComponent传递props和callbacks来抽象state。例如:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line">function ppHOC(WrappedComponent) &#123;</div><div class="line">    return class PP extends React.Component &#123;</div><div class="line">        constructor(props) &#123;</div><div class="line">            super(props);</div><div class="line">            this.state = &#123;</div><div class="line">                name: &apos;&apos;</div><div class="line">            &#125;;</div><div class="line">            this.onNameChange = this.onNameChange.bind(this);</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        onNameChange(e) &#123;</div><div class="line">            this.setState(&#123;</div><div class="line">                name: e.target.value</div><div class="line">            &#125;);</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        render() &#123;</div><div class="line">            const newProps = &#123;</div><div class="line">                name: &#123;</div><div class="line">                    value: this.state.name,</div><div class="line">                    onChange: this.onNameChange</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">            return &lt;WrappedComponent &#123;...this.props&#125; &#123;...newProps&#125;/&gt;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>然后使用：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">@ppHOC</div><div class="line">class Example extends React.Comopnent &#123;</div><div class="line">    render() &#123;</div><div class="line">        return &lt;input name=&quot;name&quot; &#123;...this.props.name&#125;/&gt;;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>此时的input是一个可控的input。<br>（4）把WrappedComponent与其他elements包装在一起<br>出于操作样式、布局或其它目的，你可以将 WrappedComponent 与其它组件包装在一起。一些基本的用法也可以使用正常的父组件来实现（附录 B），但是就像之前所描述的，使用高阶组件你可以获得更多的灵活性。<br>例如：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">function ppHOC(WrappedComponent) &#123;</div><div class="line">    return class PP extends React.Component &#123;</div><div class="line">        return (</div><div class="line">            &lt;div style=&#123;&#123;display: &apos;block&apos;&#125;&#125;&gt;</div><div class="line">                &lt;WrappedComponent &#123;this.props&#125; /&gt;</div><div class="line">            /div&gt;</div><div class="line">        );</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h4 id="反向继承-Inheritance-Inversion"><a href="#反向继承-Inheritance-Inversion" class="headerlink" title="反向继承(Inheritance Inversion)"></a>反向继承(Inheritance Inversion)</h4><p>反向继承一个简单的实现<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">function iiHOC(WrappedComponent) &#123;</div><div class="line">    return class Enhancer extends WrappedComponent &#123;</div><div class="line">        render() &#123;</div><div class="line">            return super.render();</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>返回的高阶组件类（Enhancer）继承了WrappedComponent，之所以称之为反向继承是因为WrappedComponent被动地被Enhancer继承，而不是 WrappedComponent 去继承 Enhancer。通过这种方式他们之间的关系倒转了。<br>反向继承允许高阶组件通过 this 关键词获取 WrappedComponent，意味着它可以获取到 state，props，组件生命周期（component lifecycle）钩子，以及渲染方法（render）。<br>是请注意，你可以通过高阶组件来给 WrappedComponent 创建新的生命周期挂钩方法，别忘了调用 super.[lifecycleHook] 防止破坏 WrappedComponent。</p>
<h5 id="React-Reconciliation-过程"><a href="#React-Reconciliation-过程" class="headerlink" title="React Reconciliation 过程"></a>React Reconciliation 过程</h5><p>React Element在react执行它的reconciliation过程描述什么将被渲染，React Element可以分为两类：String或Function。String 类型的 React Element 代表原声 DOM 节点，Function 类型的 React Element 代表通过 React.Component 创建的组件<br>Function 类型的 React Element 将在 reconciliation 阶段被解析成 DOM 类型的 React Element （最终结果一定都是 DOM 元素）。<br>这点非常重要，这意味<strong>反向继承的高阶组件不保证一定解析整个子元素树</strong>。这对渲染劫持非常重要。</p>
<h5 id="可以用反向继承高阶组件做什么？"><a href="#可以用反向继承高阶组件做什么？" class="headerlink" title="可以用反向继承高阶组件做什么？"></a>可以用反向继承高阶组件做什么？</h5><ul>
<li>渲染劫持 Rendering Highjacking</li>
<li>操作state</li>
</ul>
<ol>
<li>渲染劫持<br>之所以被称为渲染劫持是因为高阶组件控制了WrappedComponent生成的渲染结果，并且可以各种操作。通过渲染劫持可以：<ul>
<li>读取，添加，删除，修改 任何一个将被渲染的React Element的 props</li>
<li>在渲染方法中读取或更改React Element tree，也就是 WrappedComponent 的 children</li>
<li>根据条件不同，选择性的渲染子树</li>
<li>给子树里的元素变更样式<br>其中渲染指的是 WrappedComponent.render 方法<blockquote>
<p>无法更改或创建 props 给 WrappedComponent 实例，因为 React 不允许变更一个组件收到的 props，但是你可以在 render 方法里更改子元素/子组件们的 props。</p>
</blockquote>
</li>
</ul>
</li>
</ol>
<p>反向继承的高阶组件不保证一定渲染整个子元素树，这同时也给渲染劫持添加了一些限制。通过反向继承，只能劫持WrappedComponent渲染的元素，这意味着如果 WrappedComponent 的子元素里有 Function 类型的 React Element，你不能劫持这个元素里面的子元素树的渲染<br>例子:通过 render 来变成 React Elements tree 的结果<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">function iiHOC(WrappedComponent) &#123;</div><div class="line">  return class Enhancer extends WrappedComponent &#123;</div><div class="line">    render() &#123;</div><div class="line">      const elementsTree = super.render()</div><div class="line">      let newProps = &#123;&#125;;</div><div class="line">      if (elementsTree &amp;&amp; elementsTree.type === &apos;input&apos;) &#123;</div><div class="line">        newProps = &#123;value: &apos;may the force be with you&apos;&#125;</div><div class="line">      &#125;</div><div class="line">      const props = Object.assign(&#123;&#125;, elementsTree.props, newProps)</div><div class="line">      const newElementsTree = React.cloneElement(elementsTree, props, elementsTree.props.children)</div><div class="line">      return newElementsTree</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>这里你可以做任何操作，比如你可以遍历整个 element tree 然后变更某些元素的 props。这恰好就是 Radium 的工作方式。</p>
<blockquote>
<p>注意：你不能通过 Props Proxy 来做渲染劫持.<br>即使你可以通过 WrappedComponent.prototype.render 获取它的 render 方法，你需要自己手动模拟整个实例以及生命周期方法，而不是依靠 React，这是不值当的，应该使用反向继承来做到渲染劫持。要记住 React 在内部处理组件的实例，而你只通过 this 或 refs 来处理实例。</p>
</blockquote>
<ol>
<li>操作state<br>高阶组件可以<strong>读取，修改，删除</strong>WrappedComponent实例的state，必要的话可以添加新的state。但是注意的是，这样会弄乱WrappedComponent的state，导致破坏一些东西。通常不介意使用高阶组件来读取或添加state，添加state需要使用命名空间来防止与 WrappedComponent 的 state 冲突。<br>我们举个例子，通过显示 WrappedComponent 的 props 和 state 来 debug<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">export function IIHOCDEBUGGER(WrappedComponent) &#123;</div><div class="line">    return class II extends WrappedComponent &#123;</div><div class="line">        render() &#123;</div><div class="line">            return (</div><div class="line">                &lt;div&gt;</div><div class="line">                    &lt;h2&gt;HOC Debugger Component&lt;/h2&gt;</div><div class="line">                    &lt;p&gt;Props&lt;/p&gt; &lt;pre&gt;&#123;JSON.stringify(this.props, null, 2)&#125;&lt;/pre&gt;</div><div class="line">                    &lt;p&gt;State&lt;/p&gt;&lt;pre&gt;&#123;JSON.stringify(this.state, null, 2)&#125;&lt;/pre&gt;</div><div class="line">                    &#123;super.render()&#125;</div><div class="line">                &lt;/div&gt;</div><div class="line">            )</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ol>
<h4 id="命名"><a href="#命名" class="headerlink" title="命名"></a>命名</h4><p>通过高阶组件包装一个组件时候，会丢失原先 WrappedComponent 的名字，可能会给开发和 debug 造成影响。常见的解决方法是在原先的 WrappedComponent 的名字前添加一个前缀，下面是从 React-Redux 中拿出来。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">HOC.displayName = `HOC($getDisplayName(WrappedComponent))`</div><div class="line">或者</div><div class="line">class HOC extends WrappedComponent &#123;</div><div class="line">    static displayName = `HOC($getDisplayName(WrappedComponent))`</div><div class="line">    ...</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>其中方法 getDisplayName 被如下定义：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">function getDisplayName(WrappedComponent) &#123;</div><div class="line">    return WrappedComponent.displayName ||</div><div class="line">        WrappedComponent.name ||</div><div class="line">        `Component`</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>当然，我们可以不需要自己写这个方法，因为 <a href="https://github.com/acdlite/recompose" target="_blank" rel="external">recompose</a>已经提供了。</p>
<h4 id="案例学习"><a href="#案例学习" class="headerlink" title="案例学习"></a>案例学习</h4><p>下面的案例是用了许多高阶组件思想，值得学习。</p>
<h5 id="React-Redux"><a href="#React-Redux" class="headerlink" title="React-Redux"></a>React-Redux</h5><p>React-Redux 是 Redux 官方的对于 React 的绑定。 其中一个方法 connect 处理了所有关于监听 store 的 bootstrap 代码 以及清理工作，这是通过 Props Proxy 来实现的。<br>如果你曾经使用过 Flux 你会知道 React 组件需要和一个或多个 store 连接，并且添加/删除对 store 的监听，从中选择需要的那部分 state。而 React-Redux 帮你把它们实现了.</p>
<h5 id="Radium"><a href="#Radium" class="headerlink" title="Radium"></a>Radium</h5><p>Radium 是一个增强了行内（inline）css 能力的库，它允许在inline css 使用 css 伪选择器，<a href="https://speakerdeck.com/vjeux/react-css-in-js" target="_blank" rel="external">inline css</a>又被成为 CSS in JS。<br>Radium是怎么允许 inline css 来实现 CSS 伪选择器的呢，例如 hover？它实现了一个反向继承来使用渲染劫持，添加适当的事件监听来模拟 CSS 伪选择器，这要求 Radium 读取整个 WrappedComponent 将要渲染的元素树，每当找到元素带有的 style props，它就会添加对应的时间监听 props。简单地说，Radium 修改了原先元素树的props，实际上更加复杂。<br>Radium 只暴露了一个非常简单的API给开发者，而开发者几乎不会注意到它的存在和它是怎么发挥作用的，而实现了想要的功能。这揭露了高阶组件的能力。</p>
<h4 id="附录A-高阶组件和参数"><a href="#附录A-高阶组件和参数" class="headerlink" title="附录A: 高阶组件和参数"></a>附录A: 高阶组件和参数</h4><p>有时在高阶组件中使用参数很有用，举个例子：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">function HOCFactoryFactory(...params) &#123;</div><div class="line">    // do something wiht params</div><div class="line">    return function HOCFactory(WrappedComponent) &#123;</div><div class="line">        return class HOC extends WrappedComponent &#123;</div><div class="line">            render() &#123;</div><div class="line">                return &lt;WrappedComponent &#123;...this.props&#125; /&gt;;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>可以这样使用它<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">HOCFactoryFactory(params)(WrappedComponent)</div><div class="line">或者</div><div class="line">@HOCFactoryFactory(params)</div><div class="line">class WrappedComponent extends React.Component &#123;&#125;</div></pre></td></tr></table></figure></p>
<h4 id="附录B：和父组件的不同之处"><a href="#附录B：和父组件的不同之处" class="headerlink" title="附录B：和父组件的不同之处"></a>附录B：和父组件的不同之处</h4><p>父组件就是单纯的 React 组件包含了一些子组件（children）。React 提供了获取和操作一个组件的 children 的 APIs。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">class Parent extends React.Component &#123;</div><div class="line">    render() &#123;</div><div class="line">        return (</div><div class="line">            &lt;div&gt;</div><div class="line">                &#123; this.props.children &#125;</div><div class="line">            &lt;/div&gt;</div><div class="line">        )</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">render((</div><div class="line">    &lt;Parent&gt;</div><div class="line">        &#123; children &#125;</div><div class="line">    &lt;/Parent&gt;</div><div class="line">), mountNode)</div></pre></td></tr></table></figure></p>
<h4 id="总结：高阶组件能做和不能做的"><a href="#总结：高阶组件能做和不能做的" class="headerlink" title="总结：高阶组件能做和不能做的"></a>总结：高阶组件能做和不能做的</h4><ul>
<li>渲染劫持</li>
<li>操作内部 props</li>
<li>抽象 state。但是有缺点，不能再父组件外获取到它的 state，除非明确地实现了钩子。</li>
<li>与新的 React Element 包装。这似乎是唯一一点，使用父组件要比高阶组件强，但高阶组件也同样可以实现。</li>
<li>Children 的操控。如果 children 不是单一 root，则需要多添加一层来包括所有 children，可能会使你的 markup 变得有点笨重。使用高阶组件可以保证单一 root。</li>
<li><p>父组件可以在元素树立随意使用，它们不像高阶组件一样限制于一个组件。<br>通常来讲，能使用父组件达到的效果，尽量不要用高阶组件，因为高阶组件是一种更 hack 的方法，但同时也有更高的灵活性。React 带来了很多创新，人们维护着像 Radium，React-Redux，React-Router 之类的项目，都是很好的证明。</p>
<h4 id="引用文章"><a href="#引用文章" class="headerlink" title="引用文章"></a>引用文章</h4></li>
</ul>
<ol>
<li><a href="https://zhuanlan.zhihu.com/p/22054582?refer=purerender" target="_blank" rel="external">基于Decorator的组件扩展实践</a></li>
<li><a href="http://www.jianshu.com/p/0aae7d4d9bc1" target="_blank" rel="external">深入理解 React 高阶组件</a></li>
</ol>

      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/props/">props</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/react/">react</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/stateless/">stateless</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/高阶组件/">高阶组件</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-sass之四-mixin-include-placeholder-2" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/01/22/sass之四-mixin-include-placeholder-2/" class="article-date">
      <time datetime="2017-01-22T10:11:51.000Z" itemprop="datePublished">2017-01-22</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/01/22/sass之四-mixin-include-placeholder-2/">sass之四-mixin-include-placeholder(2)</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        
      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/">%</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/extend/">extend</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/include/">include</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/mixin/">mixin</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/sass/">sass</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-web优化之css-sprites" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/01/21/web优化之css-sprites/" class="article-date">
      <time datetime="2017-01-21T02:19:27.000Z" itemprop="datePublished">2017-01-21</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/01/21/web优化之css-sprites/">web优化之css sprites</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p>Css sprites翻译为css精灵，其实就是通过多个多个图片融合到一幅图里面，然后通过CSS的一些技术布局到网页上。好处就是图片多的话，会增加http的请求，促使网站性能的降低，特别是图片特别多的网站，如果能用css sprites降低图片数量，带来的将是速度的提升。这样一来，当访问该页面时候，，载入的图片就不会像以前那样一幅一幅地慢慢显示出来了。对于当前网络流行的速度而言，不高于200KB的单张图片的所需载入时间基本是差不多的，所以无需顾忌这个问题。</p>
<h4 id="CSS-Sprites使用"><a href="#CSS-Sprites使用" class="headerlink" title="CSS Sprites使用"></a>CSS Sprites使用</h4><ol>
<li><p>首先定义一个共用的css样式</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">.bg_sprite &#123; background-image: url(/your image..); background-repeat: no-repeat &#125;</div></pre></td></tr></table></figure>
</li>
<li><p>针对不同的需求设置background-position</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">#ico1 &#123;width:容器宽度;height:容器高度;background-position:X坐标 Y坐标&#125;</div><div class="line">#ico2 &#123;width:容器宽度;height:容器高度;background-position:X坐标 Y坐标&#125;</div><div class="line">#ico3 &#123;width:容器宽度;height:容器高度;background-position:X坐标 Y坐标&#125;</div><div class="line">.nav &#123;width:容器宽度;height:容器高度;background-position:X坐标 Y坐标&#125;</div><div class="line">当然也有简写方法：</div><div class="line">#ico1 &#123;width:容器宽度;height:容器高度;background:url(/整图地址) no-repeat X坐标 Y坐标;&#125;</div><div class="line">其中，X坐标和Y坐标表示原图相对于ico1框左上角点的偏移量，即 坐标 0 0表示背景图和ico1框的左上角点重合</div></pre></td></tr></table></figure>
</li>
</ol>
<h4 id="什么是base64编码"><a href="#什么是base64编码" class="headerlink" title="什么是base64编码"></a>什么是base64编码</h4><p>图片的下载始终都要向服务器请求，要是图片的下载不用向服务器发出请求，而可以随着HTML的下载同时下载到本地，base64就是正好解决此问题。<br>图片的base64编码就是将一副图片数据编码成一个字符串，使用该字符串代替图像地址。下面以base64编码和CssSprites比较为例，使用base64编码前提就是base64编码的图片尺寸足够小。<br>如下图所示，博客园的Logo只有3.27KB，已经很小了，但是如果将其制作转化成base64编码，生成的base64字符串编码足足有 4406 个。即便base64编码能够被gzip压缩，压缩率能达到50%以上，想象一下，一个元素的css样式编写居然超过了2000个字符，那对css整体的可读性将会造成十分大的影响，代码的冗余使得在此使用base64编码将得不偿失。<br>那么，是不是表示base64编码无用武之地呢？不然。当页面中的图片满足以下要求，base64就能大显生手。<br>如果<strong>图片足够小</strong>且因为用处的<strong>特殊性无法被制作成雪碧图（CssSprites）</strong> ，在整个网站的复用性很高且基本不会被更新 。那么此时使用base64编码传输图片就可谓好钢用在刀刃上，思前想后，符合这个规则的，有一个是我们经常会遇到的，就是页面的背景图background-image。在很多地方，我们会制作一个很小的图片大概是几px*几px，然后平铺它页面当背景图。因为是背景图的缘故，所以无法将它放入雪碧图，而它却存在网站的很多页面，这种图片往往只有几十字节，却需要一个http请求，十分不值得。那么此时将它转化为base64编码，何乐而不为.</p>
<h4 id="base64和CssSprites"><a href="#base64和CssSprites" class="headerlink" title="base64和CssSprites"></a>base64和CssSprites</h4><p>对两种技术的看法：</p>
<ol>
<li>使用CssSprites合并为一张大图，页面具有多种风格，需要换肤功能，可以使用CssSprites，不会频繁的改动，使用时候无需重复图形内容，没有base64编码成本，降低图片更新的维护难度。</li>
<li>使用base64直接把图片编码成字符串写入CSS文件，无须额外请求，对极小或者极简单图片可以被gzip，降低css维护难度，可像单独图片一样使用，比如背景图片使用等，没有跨域问题，无需老吕缓存，文件头或者cookies问题</li>
</ol>

      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/css/">css</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/image/">image</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/web优化/">web优化</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-sass之三-mixin-include-placeholder" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/01/20/sass之三-mixin-include-placeholder/" class="article-date">
      <time datetime="2017-01-20T09:30:19.000Z" itemprop="datePublished">2017-01-20</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/01/20/sass之三-mixin-include-placeholder/">sass之三-mixin,include, %placeholder</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p>这节将讲解sass四个特性: 变量variables，嵌套nesting，混合mixins, 继承extend.</p>
<h4 id="继承"><a href="#继承" class="headerlink" title="继承"></a>继承</h4><p>继承相对简单，这里不做讲解</p>
<h4 id="mixins"><a href="#mixins" class="headerlink" title="mixins"></a>mixins</h4><p>mixins相当于函数功能，函数功能就是减少代码量，提取出来作为公共模块被调用，可以通过@include进行调用。<br>定义<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">@mixin 名称( 参数: 默认值) &#123;</div><div class="line">    /* 公共样式 */</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>调用<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">selector &#123;</div><div class="line">    @include 名称(参数值);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>mixins最明显的用例是来处理浏览器前缀的问题</p>
<h4 id="sass中嵌套，混合和继承的缺点"><a href="#sass中嵌套，混合和继承的缺点" class="headerlink" title="sass中嵌套，混合和继承的缺点"></a>sass中嵌套，混合和继承的缺点</h4><ol>
<li>嵌套的缺点<br>SASS嵌套让我们在写代码的时候，不再需要考虑如何嵌套，如何添加类或者ID。简单来说，知道了父元素，其后代元素<br>都可以很清晰的控制，但生成的css选择器层级越深，一般而言，查询的就越慢，影响页面的性能，一般是2-3层为最佳。</li>
<li>混合的缺点<br>虽然Mixins能帮助我们把相同的样式通过@mixin来定义成一个模块，在需要的时候调用。然而混合在生成的CSS代码中也存在一个潜在的不足，而且很多初学者都将Mixins用在错误的地方。<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line">// define @mixin rounded</div><div class="line">@mixin rounded &#123;</div><div class="line">  -webkit-border-radius: 5px;</div><div class="line">  -moz-border-radius: 5px;</div><div class="line">  -o-border-radius: 5px;</div><div class="line">  -ms-border-radius: 5px;</div><div class="line">  border-radius: 5px;</div><div class="line">&#125;</div><div class="line"></div><div class="line">button &#123;</div><div class="line">  @include rounded;</div><div class="line">  background: #ccc;</div><div class="line">  color: #222;</div><div class="line">&#125;</div><div class="line"></div><div class="line">.simple-form input &#123;</div><div class="line">  @include rounded;</div><div class="line">&#125;</div><div class="line"></div><div class="line">.main-nav .item &#123;</div><div class="line">  color: #fff;</div><div class="line">  a:hover,</div><div class="line">  a:active &#123;</div><div class="line">    @include rounded;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ol>
<p>但是编译后的结果是这样子的，<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line">button &#123;</div><div class="line">  -webkit-border-radius: 5px;</div><div class="line">  -moz-border-radius: 5px;</div><div class="line">  -o-border-radius: 5px;</div><div class="line">  -ms-border-radius: 5px;</div><div class="line">  border-radius: 5px;</div><div class="line">  background: #ccc;</div><div class="line">  color: #222; &#125;</div><div class="line"></div><div class="line">.simple-form input &#123;</div><div class="line">  -webkit-border-radius: 5px;</div><div class="line">  -moz-border-radius: 5px;</div><div class="line">  -o-border-radius: 5px;</div><div class="line">  -ms-border-radius: 5px;</div><div class="line">  border-radius: 5px; &#125;</div><div class="line"></div><div class="line">.main-nav .item &#123;</div><div class="line">  color: #fff; &#125;</div><div class="line">  .main-nav .item a:hover,</div><div class="line">  .main-nav .item a:active &#123;</div><div class="line">    -webkit-border-radius: 5px;</div><div class="line">    -moz-border-radius: 5px;</div><div class="line">    -o-border-radius: 5px;</div><div class="line">    -ms-border-radius: 5px;</div><div class="line">    border-radius: 5px; &#125;</div></pre></td></tr></table></figure></p>
<p>这样一来，@mixin rounded中定义的样式被重复的编译出来，不但没有变的简洁，反而变得臃肿，这样是不是感觉没有什么用？理想的是<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">button,</div><div class="line">.simple-form input,</div><div class="line">.main-nav .item a:hover, .main-nav .item a:active &#123;</div><div class="line">    -webkit-border-radius: 5px;</div><div class="line">    -moz-border-radius: 5px;</div><div class="line">    -o-border-radius: 5px;</div><div class="line">    -ms-border-radius: 5px;</div><div class="line">    border-radius: 5px; &#125;</div></pre></td></tr></table></figure></p>
<p>那该如何正确的使用@mixins呢？<br>Mixins的黄金规则是将相似的风格定义在一个@mixin中。请注意这里的一个关键词相似的，另外Mixins主要是用于重用，而不是用来指定具体的属性值。例如这个实例，我们应该用@mxin来创建不同半径的圆角，而不是用来创建一个具体值的@mixin。换句话来说，如果你创建的Mixins没有传参数，那您就是一种错误的使用方法。基于这点出发，我们可以把上例中的@mixin rounded传入一个$radius参数：著作权归作者所有。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">// define @mixin rounded</div><div class="line">@mixin rounded($radius: 5px) &#123;</div><div class="line">  -webkit-border-radius: 5px;</div><div class="line">  -moz-border-radius: 5px;</div><div class="line">  -o-border-radius: 5px;</div><div class="line">  -ms-border-radius: 5px;</div><div class="line">  border-radius: 5px;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>这样结果变成更加简洁明了了。</p>
<ol>
<li>继承的缺点<br>前面说过，SASS的继承，可以将相同样式规则定义在一个类中，然后能过@extend来调用。这样就可以把相同样式合并在一起。按照这个原理，我们可以把上面的@mixin rounded替换成.rounded，然后在需要的地方通过@extend来调用.rounded。这样就可以解决使用@mixin致使样式重复出现多次的问题。<br>但是.rounded样式可能不只运用在一个地方或者一个样式文件之中。另外，@extend是可以读取SASS文件中类名，这可能之后会出现很大问题。举个例子：</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line">.button &#123;</div><div class="line">  display: block;</div><div class="line">  padding: 10px;</div><div class="line">  background: green;</div><div class="line">&#125;</div><div class="line"></div><div class="line">.sidebar .signup .button &#123;</div><div class="line">  margin-top: 20px;</div><div class="line">&#125;</div><div class="line"></div><div class="line">.registrantion,</div><div class="line">.remember-password &#123;</div><div class="line">  .button &#123;</div><div class="line">    margin-bottom: 33px;</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">.edit-account .delete-area .button &#123;</div><div class="line">  background-color: red;</div><div class="line">  color: white;</div><div class="line">&#125;</div><div class="line"></div><div class="line">.article a &#123;</div><div class="line">  @extend .button;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>最终编译出来的结果是：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">.button, .article a &#123;</div><div class="line">  display: block;</div><div class="line">  padding: 10px;</div><div class="line">  background: green; &#125;</div><div class="line"></div><div class="line">.sidebar .signup .button,</div><div class="line">.sidebar .signup .article a,</div><div class="line">.article .sidebar .signup a &#123;</div><div class="line">  margin-top: 20px; &#125;</div><div class="line"></div><div class="line">.registrantion .button,</div><div class="line">.registrantion .article a,</div><div class="line">.article .registrantion a,</div><div class="line">.remember-password .button,</div><div class="line">.remember-password .article a,</div><div class="line">.article .remember-password a &#123;</div><div class="line">  margin-bottom: 33px; &#125;</div><div class="line"></div><div class="line">.edit-account .delete-area .button,</div><div class="line">.edit-account .delete-area .article a,</div><div class="line">.article .edit-account .delete-area a &#123;</div><div class="line">  background-color: red;</div><div class="line">  color: white; &#125;</div></pre></td></tr></table></figure></p>
<p>出乎意料，我们期望的是<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">.button, .article a &#123;</div><div class="line">    display: block;</div><div class="line">    padding: 10px;</div><div class="line">    background: green;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><strong>.button</strong> 类名可能用在不同之处，有不同的容器包裹着，然而在SASS中的<strong>@extend</strong> 无法判断引用哪个地方的 <strong>.button</strong>,所以自己做主将不同地方出现的.button类名有引入进来，造成了上述现象。那怎么办？使用％placeholders</p>
<h4 id="强大的"><a href="#强大的" class="headerlink" title="强大的%"></a>强大的%</h4><p>%只是一个占位符，不是正常的选择器，只要不通过@extend调用，是不会产生任何代码量的，这个功能用来取代上述的.class与@extend完美简单。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">％placeholders &#123; /* 共用样式 */ &#125;</div></pre></td></tr></table></figure></p>
<p>在需要的时候通过@extend调用<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">selector &#123;</div><div class="line">    @extend %placeholders;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>我们举个例子<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">%clearfix &#123;</div><div class="line">    *zoom: 1;</div><div class="line"></div><div class="line">    &amp;::after,</div><div class="line">    &amp;::before &#123;</div><div class="line">        content: &quot;&quot;,</div><div class="line">        display: table;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    &amp;::after &#123;</div><div class="line">        clear: both;</div><div class="line">        overflow: hidden;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>调用的时候：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">nav &#123;</div><div class="line">    display: block;</div><div class="line">    ul &#123;</div><div class="line">        margin: 50px auto;</div><div class="line">        width: 800px;</div><div class="line">        @extend %clearfix;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h4 id="引用博客"><a href="#引用博客" class="headerlink" title="引用博客"></a>引用博客</h4><p><a href="http://www.w3cplus.com/preprocessor/sass-basic-mixins-nesting-placeholders-extend.html" target="_blank" rel="external">http://www.w3cplus.com/preprocessor/sass-basic-mixins-nesting-placeholders-extend.html</a></p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/include/">include</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/mixin/">mixin</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/sass/">sass</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
  
    <nav id="page-nav">
      <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/2/">Next &raquo;</a>
    </nav>
  
</div>
      <footer id="footer">
    <div class="outer">
        <div id="footer-info">
            <div class="footer-left">
                <i class="fa fa-copyright"></i> 
                2016-2017 罗旭
            </div>
            <div class="footer-right">
                <a href="http://hexo.io/" target="_blank" title="快速、简洁且高效的博客框架">Hexo</a>  Theme <a href="https://github.com/MOxFIVE/hexo-theme-yelee" target="_blank" title="简而不减 Hexo 双栏博客主题  v3.5">Yelee</a> by MOxFIVE <i class="fa fa-heart animated infinite pulse"></i>
            </div>
        </div>
        
            <div class="visit">
                
                    <span id="busuanzi_container_site_pv" style='display:none'>
                        <span id="site-visit" title="本站到访数"><i class="fa fa-user" aria-hidden="true"></i><span id="busuanzi_value_site_uv"></span>
                        </span>
                    </span>
                
                
                    <span>| </span>
                
                
                    <span id="busuanzi_container_page_pv" style='display:none'>
                        <span id="page-visit"  title="本页阅读量"><i class="fa fa-eye animated infinite pulse" aria-hidden="true"></i><span id="busuanzi_value_page_pv"></span>
                        </span>
                    </span>
                
            </div>
        
    </div>
</footer>
    </div>
    
<script data-main="/js/main.js" src="//cdn.bootcss.com/require.js/2.2.0/require.min.js"></script>

    <script>
        $(document).ready(function() {
            var iPad = window.navigator.userAgent.indexOf('iPad');
            if (iPad > -1 || $(".left-col").css("display") === "none") {
                var bgColorList = ["#9db3f4", "#414141", "#e5a859", "#f5dfc6", "#c084a0", "#847e72", "#cd8390", "#996731"];
                var bgColor = Math.ceil(Math.random() * (bgColorList.length - 1));
                $("body").css({"background-color": bgColorList[bgColor], "background-size": "cover"});
            }
            else {
                var backgroundnum = 5;
                var backgroundimg = "url(/background/bg-x.jpg)".replace(/x/gi, Math.ceil(Math.random() * backgroundnum));
                $("body").css({"background": backgroundimg, "background-attachment": "fixed", "background-size": "cover"});
            }
        })
    </script>





<div class="scroll" id="scroll">
    <a href="#" title="返回顶部"><i class="fa fa-arrow-up"></i></a>
    <a href="#comments" onclick="load$hide();" title="查看评论"><i class="fa fa-comments-o"></i></a>
    <a href="#footer" title="转到底部"><i class="fa fa-arrow-down"></i></a>
</div>
<script>
    // Open in New Window
    
        var oOpenInNew = {
            
            
            
            
            
            
             archives: ".archive-article-title", 
             miniArchives: "a.post-list-link", 
            
             friends: "#js-friends a", 
             socail: ".social a" 
        }
        for (var x in oOpenInNew) {
            $(oOpenInNew[x]).attr("target", "_blank");
        }
    
</script>

<script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js">
</script>
  </div>
</body>
</html>